# Lex/Flex的语法结构

## lex/flex的语法结构

* 通过处理其源文件（.l文件）来生成词法和语法分析器

```c
/* 定义段 */
%{
%}
%%
/* 规则段 */
%%
/* 用户子程序段 */
```

### 定义段

声明及选项设置等，会直接复制到输出文件的开头部分。（例如C语言的注释、头文件包含）

### 规则段

一系列匹配模式（正则表达式）和动作（C代码），在输入和模式匹配的时候，执行动作部分的代码。

格式： `模式1    {动作1（C代码）}`

| 符号 |         正则表达式中含义         |
| :--: | :------------------------------: |
|  \|  |                或                |
| [ ]  |        括号中的字符取其一        |
|  -   |  a-z即ASCII码中从a到z的所有字符  |
|  \   | 转义（flex不能识别除字母外的字符 |
|  *   |           0或多个字符            |
|  ？  |            0或1个字符            |
|  +   |           1或多个字符            |
|  ^   |        除此之外的其余字符        |
|  .   |  除\n意外的所有字符。等价于^\n   |

### 用户子程序段

一系列辅助函数（C代码），会被原样复制到输出文件中。

# 生成PL语言的词法分析器

基本原理如上

❗**注意**：因为是顺序匹配，即从上至下依次匹配规则，所以需要合理安排顺序。